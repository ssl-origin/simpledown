<!-- INCLUDE overall_header.html -->
<!-- INCLUSÃO CONDICIONAL DO TEMA CLARO/ESCURO -->
<!-- IF S_SIMPLEDOWN_THEME == 'dark' -->
    <!-- INCLUDECSS @mundophpbb_simpledown/simpledown_dark.css -->
<!-- ELSE -->
    <!-- INCLUDECSS @mundophpbb_simpledown/simpledown_light.css -->
<!-- ENDIF -->

<!-- Carregamento do Font Awesome 4.7.0 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:wght@400;500;600;700&display=swap" rel="stylesheet">

<div class="simpledown-container">
    <div class="simpledown-header-panel">
        <h2 class="file-name-uppercase">{FILE_NAME}</h2>
        <p class="category-breadcrumb">
            {L_SIMPLEDOWN_CATEGORY}: <strong><em>{CAT_NAME}</em></strong>
        </p>
    </div>

    <div class="details-card-expanded">
        <div class="card-content details-card-content">
            <div class="details-wrapper">
                <!-- IF HAS_THUMBNAIL -->
                <div class="details-thumbnail">
                    <img src="{U_THUMBNAIL}?v={@time()}"
                         alt="{FILE_NAME}"
                         class="thumbnail-fixed"
                         onclick="openImageModal('{U_THUMBNAIL}?v={@time()}')"
                         style="cursor: pointer;" />
                </div>
                <!-- ENDIF -->
                <div class="details-description <!-- IF not HAS_THUMBNAIL -->full-width<!-- ENDIF -->">
                    <!-- IF FILE_DESC -->
                    <p class="file-description-full">{FILE_DESC}</p>
                    <!-- ELSE -->
                    <p class="file-description-full no-description">{L_SIMPLEDOWN_NO_DESCRIPTION}</p>
                    <!-- ENDIF -->
                </div>
            </div>

            <div class="details-single-info-row">
                <span class="details-file-name">
                    <i class="fa fa-fw {FILE_ICON}"></i>
                    <span class="file-realname-truncate">{FILE_REALNAME}</span>
                </span>

                <span class="info-downloads">
                    <i class="fa fa-download fa-fw"></i> {FILE_DOWNLOADS} {L_SIMPLEDOWN_DOWNLOADS_LOWER}
                </span>

                <span class="info-size">
                    <i class="fa fa-hdd-o fa-fw"></i> {FILE_SIZE}
                </span>

                <span class="info-version">
                    <i class="fa fa-tag fa-fw version-icon"></i> {L_SIMPLEDOWN_VERSION}: {VERSION_DISPLAY}
                </span>

                <!-- Indicador de arquivo privado -->
                <!-- IF IS_PRIVATE -->
                <span class="private-badge" title="{L_SIMPLEDOWN_PRIVATE_FILE}">
                    <i class="fa fa-lock fa-fw"></i> {L_SIMPLEDOWN_PRIVATE_FILE}
                </span>
                <!-- ENDIF -->

                <!-- Preview de imagem -->
                <!-- IF IS_IMAGE -->
                <span class="preview-btn"
                      onclick="openImageModal('<!-- IF HAS_THUMBNAIL -->{U_THUMBNAIL}?v={@time()}<!-- ELSE -->{U_PREVIEW}<!-- ENDIF -->')"
                      title="{L_SIMPLEDOWN_PREVIEW_IMAGE}">
                    <i class="fa fa-eye fa-fw"></i>
                </span>
                <!-- ENDIF -->
            </div>

            <!-- Mensagem para visitantes em arquivos privados -->
            <!-- IF SHOW_LOGIN_MODAL -->
            <div class="private-download-message">
                <i class="fa fa-info-circle fa-fw"></i>
                <strong>{L_SIMPLEDOWN_PRIVATE_FILE}:</strong> {L_SIMPLEDOWN_PRIVATE_MODAL_TEXT}
                <a href="{U_LOGIN}">{L_SIMPLEDOWN_LOGIN_BUTTON}</a> {L_OR}
                <a href="{U_REGISTER}">{L_SIMPLEDOWN_REGISTER_BUTTON}</a>.
            </div>
            <!-- ENDIF -->
        </div>

        <div class="card-footer details-card-footer">
            <a href="{U_DOWNLOAD}"
               class="download-btn"
               data-private="{IS_PRIVATE}"
               onclick="checkPrivateDownload(event, this)">
                <i class="fa fa-download fa-fw"></i> {L_DOWNLOAD_BUTTON}
            </a>
        </div>
    </div>

    <div class="back-link">
        <a href="{U_SIMPLEDOWN}">{L_SIMPLEDOWN_BACK_TO_DOWNLOADS}</a>
    </div>
</div>

<!-- Modal para preview de imagem -->
<div id="image-modal" class="image-modal">
    <div class="modal-image-wrapper">
        <span class="modal-close" onclick="closeImageModal()"><i class="fa fa-times fa-fw"></i></span>
        <img id="modal-image" class="modal-image-content" alt="{L_SIMPLEDOWN_IMAGE_PREVIEW_ALT}" />
    </div>
</div>

<!-- Modal de login para arquivos privados -->
<div id="login-required-modal" class="image-modal" style="display: none;">
    <div class="modal-image-wrapper private-modal-content">
        <span class="modal-close" onclick="document.getElementById('login-required-modal').style.display='none'">
            <i class="fa fa-times fa-fw"></i>
        </span>
        <i class="fa fa-lock fa-4x" style="color: #e74c3c; margin-bottom: 20px;"></i>
        <h3>{L_SIMPLEDOWN_LOGIN_REQUIRED}</h3>
        <p>{L_SIMPLEDOWN_PRIVATE_MODAL_TEXT}</p>
        <div class="private-modal-buttons">
            <a href="{U_LOGIN}" class="download-btn">
                <i class="fa fa-sign-in fa-fw"></i> {L_SIMPLEDOWN_LOGIN_BUTTON}
            </a>
            <a href="{U_REGISTER}" class="details-btn-small">
                <i class="fa fa-user-plus fa-fw"></i> {L_SIMPLEDOWN_REGISTER_BUTTON}
            </a>
        </div>
    </div>
</div>

<script>
    const SIMPLE_DOWN_IS_LOGGED_IN = <!-- IF S_IS_LOGGED_IN -->true<!-- ELSE -->false<!-- ENDIF -->;

    function checkPrivateDownload(event, element) {
        if (element.getAttribute('data-private') === '1' && !SIMPLE_DOWN_IS_LOGGED_IN) {
            event.preventDefault();
            document.getElementById('login-required-modal').style.display = 'flex';
        }
    }

    function openImageModal(src) {
        document.getElementById('modal-image').src = src;
        document.getElementById('image-modal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
        document.getElementById('image-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    window.addEventListener('click', function(e) {
        if (e.target.id === 'image-modal') closeImageModal();
        if (e.target.id === 'login-required-modal') e.target.style.display = 'none';
    });
</script>

<!-- INCLUDE overall_footer.html -->